package UI;
import main.memory;
import main.procesor;

import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import java.awt.BorderLayout;

import javax.swing.BorderFactory;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.JTextField;
import javax.swing.JLabel;
import java.awt.FlowLayout;
import javax.swing.SpringLayout;
import javax.swing.JComboBox;
import javax.swing.JTextArea;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.ScrollPaneConstants;

public class UI {

	private JFrame frame;
	private JTextField PTR;
	private JTextField MR;
	private JTextField IP;
	private JTextField DS;
	private JTextField CS;
	private JTextField SP;
	private JTextField SI;
	private JTextField TI;
	private JTextField PI;
	private JTextField MODE;
	private procesor procesor;
	private JTextField IOI;

	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					UI window = new UI();
					
					window.frame.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	/**
	 * Create the application. 
	 */
	public UI() {
		initialize();
		procesor = new procesor();
	}

	/**
	 * Initialize the contents of the frame.
	 */
	private void initialize() {
		frame = new JFrame();
		frame.setBounds(100, 100, 588, 306);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		SpringLayout springLayout = new SpringLayout();
		frame.getContentPane().setLayout(springLayout);
		
		PTR = new JTextField();
		
		springLayout.putConstraint(SpringLayout.WEST, PTR, 10, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.SOUTH, PTR, -212, SpringLayout.SOUTH, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.EAST, PTR, -516, SpringLayout.EAST, frame.getContentPane());
		frame.getContentPane().add(PTR);
		PTR.setColumns(10);
		
		JLabel lblNewLabel = new JLabel("PTR");
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel, 10, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.SOUTH, lblNewLabel, -238, SpringLayout.SOUTH, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.NORTH, PTR, 6, SpringLayout.SOUTH, lblNewLabel);
		frame.getContentPane().add(lblNewLabel);
		
		MR = new JTextField();
		
		springLayout.putConstraint(SpringLayout.WEST, MR, 10, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.EAST, MR, 56, SpringLayout.WEST, frame.getContentPane());
		frame.getContentPane().add(MR);
		MR.setColumns(10);
		
		JLabel lblNewLabel_1 = new JLabel("MR");
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_1, 10, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.SOUTH, lblNewLabel_1, -192, SpringLayout.SOUTH, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.NORTH, MR, 1, SpringLayout.SOUTH, lblNewLabel_1);
		frame.getContentPane().add(lblNewLabel_1);
		
		JLabel lblNewLabel_2 = new JLabel("IP");
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_2, 6, SpringLayout.SOUTH, MR);
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_2, 10, SpringLayout.WEST, frame.getContentPane());
		frame.getContentPane().add(lblNewLabel_2);
		
		IP = new JTextField();
		
		springLayout.putConstraint(SpringLayout.NORTH, IP, 6, SpringLayout.SOUTH, lblNewLabel_2);
		springLayout.putConstraint(SpringLayout.WEST, IP, 10, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.EAST, IP, 56, SpringLayout.WEST, frame.getContentPane());
		frame.getContentPane().add(IP);
		IP.setColumns(10);
		
		JLabel lblNewLabel_3 = new JLabel("DS");
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_3, 6, SpringLayout.SOUTH, IP);
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_3, 10, SpringLayout.WEST, frame.getContentPane());
		frame.getContentPane().add(lblNewLabel_3);
		
		DS = new JTextField();
		
		springLayout.putConstraint(SpringLayout.NORTH, DS, 6, SpringLayout.SOUTH, lblNewLabel_3);
		springLayout.putConstraint(SpringLayout.WEST, DS, 10, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.EAST, DS, 56, SpringLayout.WEST, frame.getContentPane());
		frame.getContentPane().add(DS);
		DS.setColumns(10);
		
		JLabel lblNewLabel_4 = new JLabel("CS");
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_4, 6, SpringLayout.SOUTH, DS);
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_4, 10, SpringLayout.WEST, frame.getContentPane());
		frame.getContentPane().add(lblNewLabel_4);
		
		CS = new JTextField();
		
		springLayout.putConstraint(SpringLayout.NORTH, CS, 6, SpringLayout.SOUTH, lblNewLabel_4);
		springLayout.putConstraint(SpringLayout.WEST, CS, 10, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.EAST, CS, -516, SpringLayout.EAST, frame.getContentPane());
		frame.getContentPane().add(CS);
		CS.setColumns(10);
		
		JLabel lblNewLabel_5 = new JLabel("SP");
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_5, 0, SpringLayout.NORTH, lblNewLabel);
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_5, 35, SpringLayout.EAST, lblNewLabel);
		frame.getContentPane().add(lblNewLabel_5);
		
		SP = new JTextField();
		springLayout.putConstraint(SpringLayout.NORTH, SP, 0, SpringLayout.NORTH, PTR);
		springLayout.putConstraint(SpringLayout.WEST, SP, 6, SpringLayout.EAST, PTR);
		frame.getContentPane().add(SP);
		SP.setColumns(10);
		
		JLabel lblNewLabel_6 = new JLabel("SI");
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_6, 3, SpringLayout.NORTH, MR);
		frame.getContentPane().add(lblNewLabel_6);
		
		JLabel lblNewLabel_7 = new JLabel("TI");
		springLayout.putConstraint(SpringLayout.EAST, lblNewLabel_6, -22, SpringLayout.WEST, lblNewLabel_7);
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_7, 3, SpringLayout.NORTH, MR);
		frame.getContentPane().add(lblNewLabel_7);
		
		JLabel lblNewLabel_8 = new JLabel("IOI");
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_8, 3, SpringLayout.NORTH, MR);
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_8, 37, SpringLayout.EAST, lblNewLabel_7);
		frame.getContentPane().add(lblNewLabel_8);
		
		JLabel lblNewLabel_9 = new JLabel("PI");
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_9, 233, SpringLayout.WEST, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.EAST, lblNewLabel_8, -20, SpringLayout.WEST, lblNewLabel_9);
		springLayout.putConstraint(SpringLayout.NORTH, lblNewLabel_9, 3, SpringLayout.NORTH, MR);
		frame.getContentPane().add(lblNewLabel_9);
		
		SI = new JTextField();
		springLayout.putConstraint(SpringLayout.NORTH, SI, -3, SpringLayout.NORTH, lblNewLabel_2);
		springLayout.putConstraint(SpringLayout.WEST, SI, 87, SpringLayout.EAST, lblNewLabel_2);
		springLayout.putConstraint(SpringLayout.EAST, SI, -432, SpringLayout.EAST, frame.getContentPane());
		frame.getContentPane().add(SI);
		SI.setColumns(10);
		
		TI = new JTextField();
		springLayout.putConstraint(SpringLayout.WEST, lblNewLabel_7, 0, SpringLayout.WEST, TI);
		springLayout.putConstraint(SpringLayout.NORTH, TI, -3, SpringLayout.NORTH, lblNewLabel_2);
		springLayout.putConstraint(SpringLayout.WEST, TI, 6, SpringLayout.EAST, SI);
		springLayout.putConstraint(SpringLayout.EAST, TI, -392, SpringLayout.EAST, frame.getContentPane());
		frame.getContentPane().add(TI);
		TI.setColumns(10);
		
		PI = new JTextField();
		springLayout.putConstraint(SpringLayout.NORTH, PI, -3, SpringLayout.NORTH, lblNewLabel_2);
		frame.getContentPane().add(PI);
		PI.setColumns(10);
		
		MODE = new JTextField();
		
		springLayout.putConstraint(SpringLayout.WEST, MODE, 122, SpringLayout.EAST, lblNewLabel_4);
		springLayout.putConstraint(SpringLayout.EAST, MODE, 156, SpringLayout.EAST, lblNewLabel_4);
		frame.getContentPane().add(MODE);
		MODE.setColumns(10);
		
		JLabel lblMode = new JLabel("MODE");
		springLayout.putConstraint(SpringLayout.NORTH, MODE, 9, SpringLayout.SOUTH, lblMode);
		springLayout.putConstraint(SpringLayout.NORTH, lblMode, 3, SpringLayout.NORTH, DS);
		springLayout.putConstraint(SpringLayout.WEST, lblMode, 90, SpringLayout.EAST, DS);
		springLayout.putConstraint(SpringLayout.EAST, lblMode, 124, SpringLayout.EAST, DS);
		frame.getContentPane().add(lblMode);
        JScrollPane areaScrollPane = new JScrollPane();
        springLayout.putConstraint(SpringLayout.EAST, PI, -134, SpringLayout.WEST, areaScrollPane);
        springLayout.putConstraint(SpringLayout.EAST, lblNewLabel_9, -148, SpringLayout.WEST, areaScrollPane);
        springLayout.putConstraint(SpringLayout.EAST, SP, -292, SpringLayout.WEST, areaScrollPane);
        springLayout.putConstraint(SpringLayout.NORTH, areaScrollPane, 20, SpringLayout.NORTH, frame.getContentPane());
        springLayout.putConstraint(SpringLayout.WEST, areaScrollPane, 400, SpringLayout.WEST, frame.getContentPane());
        springLayout.putConstraint(SpringLayout.SOUTH, areaScrollPane, -40, SpringLayout.SOUTH, frame.getContentPane());
        springLayout.putConstraint(SpringLayout.EAST, areaScrollPane, 0, SpringLayout.EAST, frame.getContentPane());
        areaScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        areaScrollPane.setPreferredSize(new Dimension(100, 100));
        areaScrollPane.setBorder(
            BorderFactory.createCompoundBorder(
                BorderFactory.createCompoundBorder(
                                BorderFactory.createTitledBorder("Plain Text"),
                                BorderFactory.createEmptyBorder(5,5,5,5)),
                areaScrollPane.getBorder()));
        frame.getContentPane().add(areaScrollPane);
        final JTextArea MEMORY = new JTextArea();
        MEMORY.setTabSize(5);
        MEMORY.setColumns(5);
        areaScrollPane.setViewportView(MEMORY);
        MEMORY.setFont(new Font("Serif", Font.ITALIC, 16));
        MEMORY.setLineWrap(true);
        MEMORY.setWrapStyleWord(true);
		
		JLabel lblNewLabel_10 = new JLabel("MEMORY");
		springLayout.putConstraint(SpringLayout.SOUTH, lblNewLabel_10, -6, SpringLayout.NORTH, areaScrollPane);
		springLayout.putConstraint(SpringLayout.EAST, lblNewLabel_10, -69, SpringLayout.EAST, frame.getContentPane());
		frame.getContentPane().add(lblNewLabel_10);
		
		JButton Run = new JButton(">>");
		Run.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent arg0) {
				setField();
				showMemory(MEMORY);
			}
		});
		springLayout.putConstraint(SpringLayout.SOUTH, Run, -10, SpringLayout.SOUTH, frame.getContentPane());
		springLayout.putConstraint(SpringLayout.EAST, Run, -169, SpringLayout.EAST, frame.getContentPane());
		frame.getContentPane().add(Run);
		
		JButton stepRun = new JButton(">");
		stepRun.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				
				setField();
				showMemory(MEMORY);
				procesor.readNewLine = true;
			}
		});
		springLayout.putConstraint(SpringLayout.NORTH, stepRun, 0, SpringLayout.NORTH, Run);
		springLayout.putConstraint(SpringLayout.WEST, stepRun, 6, SpringLayout.EAST, Run);
		frame.getContentPane().add(stepRun);
		
		IOI = new JTextField();
		springLayout.putConstraint(SpringLayout.WEST, PI, 7, SpringLayout.EAST, IOI);
		springLayout.putConstraint(SpringLayout.NORTH, IOI, -3, SpringLayout.NORTH, lblNewLabel_2);
		springLayout.putConstraint(SpringLayout.WEST, IOI, 0, SpringLayout.WEST, lblNewLabel_8);
		springLayout.putConstraint(SpringLayout.EAST, IOI, 203, SpringLayout.EAST, lblNewLabel_3);
		frame.getContentPane().add(IOI);
		IOI.setColumns(10);
	}
	
	public void setField() {
		MODE.setText(Integer.toString(this.procesor.getMode()));
		PI.setText(Integer.toString(this.procesor.getPi()));
		TI.setText(Integer.toString(this.procesor.getTi()));
		IOI.setText(Integer.toString(this.procesor.getIoi()));
		SI.setText(Integer.toString(this.procesor.getSi()));
		SP.setText(Integer.toString(this.procesor.getSp()));
		CS.setText(Integer.toString(this.procesor.getCs()));
		DS.setText(Integer.toString(this.procesor.getDs()));
		IP.setText(Integer.toString(this.procesor.getIp()));
		PTR.setText(Integer.toString(this.procesor.getPtr()));
		MR.setText(this.procesor.getMr());
	}
	
	public void showMemory(JTextArea MEMORY) {
		MEMORY.setText("");
		//ram1 = this.procesor.getRAM().getSuperVisorMemory(block, word);
		int i = 0;
		int word = 0;
		MEMORY.append("SuperVisor\n");
		
		while (i < 100) {
			MEMORY.append(this.procesor.getRAM().getSuperVisorMemory(i, word, 0) + 
					this.procesor.getRAM().getSuperVisorMemory(i, word, 1) +
					this.procesor.getRAM().getSuperVisorMemory(i, word, 2) +
					this.procesor.getRAM().getSuperVisorMemory(i, word, 3) + "\n");
			word++;
			if (word ==10)
				word = 0;
			i++;
		}
		MEMORY.append("User\n");
		i = 0;
		word = 0;
		while (i < 200) {
			MEMORY.append(this.procesor.getRAM().getUserMemory(i, word, 0) + 
					this.procesor.getRAM().getUserMemory(i, word, 1) +
					this.procesor.getRAM().getUserMemory(i, word, 2) +
					this.procesor.getRAM().getUserMemory(i, word, 3) + "\n");
			word++;
			if (word ==10)
				word = 0;
			i++;
		}
	}
}
